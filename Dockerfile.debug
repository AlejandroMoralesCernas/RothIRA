# Dev/debug image for Go app (Air + Delve)
FROM golang:1.24-alpine

# Useful tools
RUN apk add --no-cache git curl build-base

# Live reload & debugger
RUN go install github.com/air-verse/air@latest \
 && go install github.com/go-delve/delve/cmd/dlv@latest

WORKDIR /app

# Air config (code itself is bind-mounted by docker-compose)
COPY .air.toml ./

EXPOSE 8080 4000

# Default to live-reload; compose overrides this for the debugger service
CMD ["air", "-c", ".air.toml"]
